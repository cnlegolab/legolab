<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë ˆê³ ì—ë“€ì¼€ì´ì…˜ STEAMì˜ì¬êµìœ¡ì„¼í„° ì—°êµ¬í™œë™ ë³´ê³ ì„œ</title>
  <meta name="viewport" content="width=1200">
  <link href="https://fonts.googleapis.com/css2?family=SUIT:wght@400;600;900&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      background: #f6f7fb; margin: 0; padding: 0;
      font-family: 'SUIT','Roboto','ë§‘ì€ ê³ ë”•',sans-serif;
      color: #253052; min-height: 100vh; letter-spacing: 0.02em;
    }
    .main-container {
      max-width: 1200px; min-width: 760px;
      margin: 64px auto 80px auto; background: #fff;
      border-radius: 22px;
      box-shadow: 0 20px 38px 0 rgba(60,85,200,.14);
      padding: 54px 74px 44px 74px; position: relative;
    }
    .toolbar { position: absolute; top: 18px; right: 34px; z-index: 19; display: flex; gap: 10px; }
    .ai-btn {
      font-family: inherit; font-weight: 700; border: none;
      border-radius: 20px; background: #fff; padding: 7px 19px;
      font-size: 15px; color: #5d6af0;
      box-shadow: 0 1px 4px rgba(60,80,150,.11);
      border: 2px solid #e1e4f6; cursor: pointer; text-decoration: none; outline: none;
      transition: all 0.14s;
    }
    .ai-btn:hover { background: #e7eafd; border-color:#b5bdfc; color:#253052;}
    .ai-btn.chatgpt { color:#19c37d; border-color:#19c37d;}
    .ai-btn.chatgpt:hover { background: #e9fff4; color:#088652;}
    .ai-btn.claude { color:#ffa400; border-color:#ffa400;}
    .ai-btn.claude:hover { background: #fffbe9; color:#b97d00;}
    .ai-btn.perplexity { color:#5470ff; border-color:#5470ff;}
    .ai-btn.perplexity:hover { background: #f0f4ff; color:#232d61;}
    .ai-btn.wrtn { color:#775cf2; border-color:#775cf2;}
    .ai-btn.wrtn:hover { background: #edeaff; color:#3c2973;}
    .ai-btn.napkin { color:#ff6f61; border-color:#ff6f61;}
    .ai-btn.napkin:hover { background: #ffeceb; color:#bd2e0e;}
    .header-visual-wrap {
      width: 100%; position: relative; margin-bottom: 0;
    }
    .logo-imgs {
      position: absolute; top: 0; left: 0;
      display: flex; flex-direction: row; gap: 16px; align-items: flex-start;
    }
    .logo-steam { max-width: 150px; min-width:90px; height: auto; display: block; }
    .logo-lego  { max-width: 130px; height: 36px; margin-top: 16px; display: block; }
    .title-center {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 110px;
    }
    .title-center h1 {
      margin: 82px 0 15px 0;
      padding: 0;
      font-size: 2.18rem;
      font-weight: 900;
      color: #3856d1;
      letter-spacing:0.02em;
      text-align: center;
      line-height: 1.3;
      word-break: keep-all;
    }
    @media (max-width: 900px) {
      .title-center h1 { font-size: 1.43rem; }
      .logo-steam { max-width: 100px; }
      .logo-lego { max-width: 70px; }
    }
    .meta-table { width: 100%; border-collapse: collapse; margin-bottom: 38px; background: #f3f4fb; border-radius: 10px; overflow: hidden;}
    .meta-table th, .meta-table td {
      padding: 16px 22px; border-bottom: 1.5px solid #ebedf4;
      text-align: left; font-size: 18px;
    }
    .meta-table th { background: #eaf0fe; width: 180px; font-weight: 700; color: #30418b; border-bottom: 1.5px solid #dbe5ff; letter-spacing: 0.04em;}
    .meta-table td { background: #fcfcff;}
    .title-input {
      width: 520px !important; max-width: 520px !important; min-width: 520px !important;
      font-size: 21px; padding: 7px 13px !important;
      border-radius: 8px; border: 1.5px solid #dde0ee; margin-bottom: 2px; margin-top: 3px;
      box-sizing: border-box; background: #fff; font-family:'SUIT','Roboto','ë§‘ì€ ê³ ë”•',sans-serif; display: inline-block;
      line-height: 1.2; height: 38px !important; min-height: 38px !important;
    }
    .wide-input,
    .meta-table input[type="date"],
    .meta-table select.curriculum-select {
      width: 360px !important; max-width: 360px !important; min-width: 360px !important;
      font-size: 16px; padding: 7px 13px !important;
      border-radius: 8px; border: 1.5px solid #dde0ee; margin-bottom: 2px; margin-top: 3px;
      box-sizing: border-box; background: #fff; font-family:'SUIT','Roboto','ë§‘ì€ ê³ ë”•',sans-serif; display: inline-block;
      line-height: 1.2; height: 38px !important; min-height: 38px !important;
    }
    /* placeholder ìŠ¤íƒ€ì¼ - ì—°êµ¬ì œëª© ì…ë ¥ì°½ê³¼ í†µì¼ */
    input::placeholder,
    textarea::placeholder {
      font-size: 16px !important;
      color: #b5b9c9 !important;
      opacity: 1;
      font-weight: 1200 !important;
      font-family: 'SUIT','Roboto','ë§‘ì€ ê³ ë”•',sans-serif;
      line-height: 1.2;
    }
    /* date ê°€ì§œ placeholderë„ ë™ì¼í•˜ê²Œ! */
    .date-placeholder {
      position: absolute; top: 7px; left: 14px;
      color: #b5b9c9 !important;
      font-size: 16px !important;
      font-family: 'SUIT','Roboto','ë§‘ì€ ê³ ë”•',sans-serif;
      font-weight: 400 !important;
      line-height: 1.2;
      opacity: 1; pointer-events: none; transition: opacity 0.1s; z-index: 1;
    }
    .date-placeholder-wrap input[type="date"]:focus + .date-placeholder,
    .date-placeholder-wrap input[type="date"]:not(:placeholder-shown) + .date-placeholder,
    .date-placeholder-wrap input[type="date"]:not([value=""]) + .date-placeholder {
      opacity: 0;
    }
    /* ë“œë¡­ë‹¤ìš´ì˜ -- ì„ íƒí•˜ì„¸ìš” -- ë“± placeholder ìŠ¤íƒ€ì¼ */
    .curriculum-select option[disabled] {
      color: #b5b9c9 !important;
      font-size: 16px !important;
      font-family: 'SUIT','Roboto','ë§‘ì€ ê³ ë”•',sans-serif;
      font-weight: 400 !important;
    }
    .curriculum-select,
    .curriculum-select option {
      color: #253052;
      font-size: 16px;
      font-family: 'SUIT','Roboto','ë§‘ì€ ê³ ë”•',sans-serif;
      font-weight: 400;
    }
    .curriculum-select option[disabled][selected] {
      color: #b5b9c9 !important;
      font-size: 16px !important;
      font-family: 'SUIT','Roboto','ë§‘ì€ ê³ ë”•',sans-serif;
      font-weight: 400 !important;
    }
    .curriculum-select:focus option,
    .curriculum-select option {
      color: #253052;
      font-size: 16px;
      font-family: 'SUIT','Roboto','ë§‘ì€ ê³ ë”•',sans-serif;
      font-weight: 400;
    }
    /* ë“œë¡­ë‹¤ìš´ í¼ì³¤ì„ ë•Œ --ì„ íƒí•˜ì„¸ìš”--ë„ placeholderì™€ ë˜‘ê°™ì´ */
    .curriculum-select:focus option[disabled] {
      color: #b5b9c9 !important;
      font-size: 16px !important;
      font-family: 'SUIT','Roboto','ë§‘ì€ ê³ ë”•',sans-serif;
      font-weight: 400 !important;
    }
    /* ì´í•˜ ê¸°ì¡´ ìŠ¤íƒ€ì¼(ìƒëµ) ... */
    .sensor-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 9px 24px; margin-top: 3px; width:100%;}
    .sensor-item { display: flex; align-items: center; background: #eef0fa; border-radius: 7px; padding: 6px 10px 6px 8px; font-size: 17px; border: 1.5px solid #dde0ee; min-width: 0; gap:7px;}
    .sensor-item label { margin: 0 4px 0 2px; font-weight: 600; }
    .sensor-qty { margin-left: 2px; display:none;}
    .sensor-item input[type=checkbox]:checked ~ .sensor-qty { display:inline-block; }
    .section-title { font-weight: 900; font-size: 1.23rem; color: #5d6af0; margin: 44px 0 13px 0; padding-left: 0px; display:flex;align-items:center;gap:12px; border: none; background: none; letter-spacing: 0.5px;}
    .section-title .icon { font-size: 1.85em; margin-right:2px;}
    .desc-box, textarea { background: #f8fafd; border-radius: 9px; padding: 21px 19px 20px 20px; margin-bottom: 17px; min-height: 100px; line-height: 1.75; font-size: 19px; box-shadow: 0 0 0 1.5px #f0f2f7; font-family:'SUIT','Roboto',sans-serif; width: 100%; box-sizing: border-box;}
    textarea { min-height: 160px; font-size: 19px; border: none; outline: none; margin-bottom: 0; transition: box-shadow .12s; margin-top:3px;}
    textarea:focus { box-shadow: 0 0 0 2.2px #7b66ff; }
    .speech-row { display: flex; align-items:center; gap:8px; margin-bottom:7px;}
    .speech-row button { padding:8px 19px;font-size:16px;font-weight:700; background: #eaf0fe; color:#5d6af0; border-radius: 19px; border:none; cursor:pointer;box-shadow: 0 1px 4px rgba(44,62,80,0.08); transition:.13s; outline:none;}
    .speech-row button:hover { background:#5d6af0; color:#fff;}
    .speech-guide { font-size:15px;color:#9ba6bb;}
    .photo-btn-row {display:flex;align-items:center;gap:10px;margin-top:14px;}
    .photo-btn { display: inline-flex; align-items: center; justify-content: center; gap:7px; font-size:18px; padding: 11px 26px; border-radius: 24px; background: linear-gradient(90deg,#6e93f7 60%,#4ac6ff 100%); color: #fff; border: none; font-weight: 800; box-shadow: 0 1px 7px 0 rgba(80,120,255,.11); transition:.13s; cursor:pointer;}
    .photo-btn:hover { background: linear-gradient(90deg,#4974d9 55%,#14cfff 100%);}
    .photo-btn:active { background: #4974d9; }
    .attach-file-btn { display:inline-flex; align-items:center; gap:6px; font-size:17px; font-weight:700; background:#eaf0fe; color:#5275ee; border-radius:18px; padding:9px 22px; border:none; cursor:pointer; transition:.13s; margin-left:7px;}
    .attach-file-btn:hover { background:#d5e6fc; color:#223385;}
    input[type="file"] {display:none;}
    .snapshot-info { text-align: center; font-size: 16px; color: #5361aa; margin-bottom: 2px; margin-top: 5px;}
    .snapshot-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 18px; margin: 14px 0 8px 0; min-height: 1em; width: 100%;}
    .snapshot-container img { width: 160px; border-radius: 11px; border: 2px solid #d8daf8; box-shadow: 1px 3px 8px 0 rgba(44,62,80,0.10); background: #fff; margin-bottom: 6px; object-fit: cover;}
    .camera-modal, .speech-modal { display:none; position:fixed; top:0;left:0;width:100vw;height:100vh; background:rgba(45,60,110,0.20);z-index:2000; align-items:center;justify-content:center;}
    .camera-modal.active, .speech-modal.active { display:flex; }
    .camera-modal-content, .speech-modal-content { background:#fff; border-radius:22px; box-shadow:0 10px 48px rgba(40,50,90,0.17); padding:44px 36px 36px 36px; display:flex;flex-direction:column;align-items:center; position:relative; min-width:400px; min-height:340px; max-width:98vw;}
    .camera-modal-close, .speech-modal-close { position:absolute; top:18px; right:24px; background:none; border:none; font-size:1.8em; color:#888; cursor:pointer;}
    .camera-modal video { border-radius:12px; border:2.5px solid #8da8ff; margin-bottom:18px; background:#111; width:380px;max-width:80vw;max-height:44vh;}
    .camera-modal .modal-btn-row { width:100%; display:flex; justify-content:center; margin-top:0; }
    .camera-modal .photo-btn { min-width:150px; }
    .speech-anim { margin: 38px 0 18px 0; width:70px; height:70px; border-radius:50%; background:#eaf0fe; display:flex; align-items:center; justify-content:center; box-shadow:0 0 0 8px #dbe9fd; animation: pulse 1.2s infinite;}
    @keyframes pulse { 0% { box-shadow:0 0 0 8px #dbe9fd;} 70% { box-shadow:0 0 0 18px #c9e2ff;} 100% { box-shadow:0 0 0 8px #dbe9fd;} }
    .speech-anim-icon { font-size:2.7em; color:#5275ee;}
    .speech-status { font-size:19px; margin-bottom:12px; color:#3856d1;}
    .speech-cancel-btn { margin-top:14px; padding:11px 36px; border-radius:19px; background:#f0f0f8; color:#2856cc; font-size:17px; border:none; font-weight:700; cursor:pointer; transition:.13s;}
    .speech-cancel-btn:hover { background:#e4eaff;}
    button.main-save-btn { padding: 14px 40px; background: #5d6af0; color: #fff; border: none; border-radius: 7px; font-size: 1.18rem; font-weight: 900; margin-top: 38px; letter-spacing: 0.05em; cursor: pointer; box-shadow: 0 2px 8px rgba(44,62,80,0.13); transition: background .14s; display: block; margin-left:auto; margin-right:auto;}
    button.main-save-btn:active { background: #3856d1; }
    button:disabled { background: #dadada; color: #888; }
    .copyright-footer {
      margin-top:52px; text-align:center; font-size:16.5px; color:#9a9ca5; padding-top:16px; border-top:1.4px solid #e3e6ef;
      letter-spacing:0.04em; font-family:'SUIT','Roboto','ë§‘ì€ ê³ ë”•',sans-serif;
    }
    @media (max-width: 1024px) {
      .main-container {padding:32px 3vw;}
      .toolbar { right: 3vw;}
      .meta-table th {width:110px;}
      .sensor-grid {grid-template-columns:1fr 1fr;}
      .header-visual-wrap {min-height:180px;}
      .logo-steam {max-width: 70px;}
      .logo-lego {max-width: 44px;}
      .title-center h1 {font-size: 1rem;}
    }
    @media print {
      body { background: #fff; }
      .main-container { box-shadow: none; margin:0; padding:0;}
      button, .toolbar { display:none !important;}
      .desc-box { background: #f7f8fd !important; -webkit-print-color-adjust:exact; }
      .section-title { background: #e7eafd !important; -webkit-print-color-adjust:exact;}
      textarea, .photo-btn-row { display:none !important;}
      .copyright-footer {color:#606066;}
    }
  </style>
</head>
<body>
  <div class="main-container" id="editForm">
    <div class="toolbar">
      <a href="https://chatgpt.com/" target="_blank" class="ai-btn chatgpt">ChatGPT</a>
      <a href="https://claude.ai/" target="_blank" class="ai-btn claude">Claude</a>
      <a href="https://www.perplexity.ai/" target="_blank" class="ai-btn perplexity">Perplexity</a>
      <a href="https://wrtn.ai/" target="_blank" class="ai-btn wrtn">Wrtn</a>
      <a href="https://www.napkin.ai/" target="_blank" class="ai-btn napkin">Napkin</a>
    </div>
    <div class="header-visual-wrap">
      <div class="logo-imgs">
        <img src="steam.png" alt="STEAM ì„¼í„° ë¡œê³ " class="logo-steam">
        <img src="lego.png" alt="LEGO Education" class="logo-lego">
      </div>
      <div class="title-center">
        <h1>
          STEAM ì˜ì¬êµìœ¡ì„¼í„°<br>
          ë ˆê³ ì—ë“€ì¼€ì´ì…˜ ì—°êµ¬í™œë™ ë³´ê³ ì„œ
        </h1>
      </div>
    </div>
    <table class="meta-table">
      <tr>
        <th>ì—°êµ¬ ì œëª©</th>
        <td>
          <input type="text" id="title" class="title-input" placeholder="ì˜ˆ: ìŠ¤ë§ˆíŠ¸ ì“°ë ˆê¸° ë¶„ë¦¬ìˆ˜ê±° ë¡œë´‡">
        </td>
      </tr>
      <tr>
        <th>ì‘ì„±ì</th>
        <td>
          <input type="text" id="author" class="wide-input" placeholder="ì´ë¦„ ì…ë ¥">
        </td>
      </tr>
      <tr>
        <th>êµìœ¡ê³¼ì •</th>
        <td>
          <select id="curriculum" class="curriculum-select wide-input" required>
            <option value="" disabled selected>-- ì„ íƒí•˜ì„¸ìš” --</option>
            <option value="STEAM-L1 SPIKE Essential">STEAM-L1 SPIKE Essential</option>
            <option value="STEAM-L2 SPIKE Prime">STEAM-L2 SPIKE Prime</option>
            <option value="STEAM-L3 EV3 Mindstorm">STEAM-L3 EV3 Mindstorm</option>
            <option value="STEAM Cless">STEAM Cless</option>
          </select>
        </td>
      </tr>
      <tr>
        <th>ì‘ì„±ì¼</th>
        <td>
          <div class="date-placeholder-wrap" style="position:relative;">
            <input type="date" id="writeDate" class="wide-input" autocomplete="off" style="background:transparent; position:relative; z-index:2;">
            <span class="date-placeholder">ì—°-ì›”-ì¼</span>
          </div>
        </td>
      </tr>
      <tr>
        <th>ì‚¬ìš© ì„¼ì„œ</th>
        <td>
          <div class="sensor-grid">
            <div class="sensor-item"><input type="checkbox" id="hub" onchange="showQty('hubQty',this)"><label for="hub">ìŠ¤ë§ˆíŠ¸í—ˆë¸Œ(Smart Hub)</label><select class="sensor-qty" id="hubQty"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select></div>
            <div class="sensor-item"><input type="checkbox" id="largeMotor" onchange="showQty('largeMotorQty',this)"><label for="largeMotor">ë¼ì§€ëª¨í„°(Large Motor)</label><select class="sensor-qty" id="largeMotorQty"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select></div>
            <div class="sensor-item"><input type="checkbox" id="mediumMotor" onchange="showQty('mediumMotorQty',this)"><label for="mediumMotor">ë¯¸ë””ì—„ëª¨í„°(Medium Motor)</label><select class="sensor-qty" id="mediumMotorQty"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select></div>
            <div class="sensor-item"><input type="checkbox" id="distanceSensor" onchange="showQty('distanceSensorQty',this)"><label for="distanceSensor">ê±°ë¦¬ì„¼ì„œ(Distance Sensor)</label><select class="sensor-qty" id="distanceSensorQty"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select></div>
            <div class="sensor-item"><input type="checkbox" id="colorSensor" onchange="showQty('colorSensorQty',this)"><label for="colorSensor">ì»¬ëŸ¬ì„¼ì„œ(Color Sensor)</label><select class="sensor-qty" id="colorSensorQty"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select></div>
            <div class="sensor-item"><input type="checkbox" id="forceSensor" onchange="showQty('forceSensorQty',this)"><label for="forceSensor">í˜ì„¼ì„œ(Force Sensor)</label><select class="sensor-qty" id="forceSensorQty"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select></div>
            <div class="sensor-item"><input type="checkbox" id="gyroSensor" onchange="showQty('gyroSensorQty',this)"><label for="gyroSensor">ìì´ë¡œì„¼ì„œ(Gyro Sensor)</label><select class="sensor-qty" id="gyroSensorQty"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select></div>
            <div class="sensor-item"><input type="checkbox" id="lightMatrix" onchange="showQty('lightMatrixQty',this)"><label for="lightMatrix">ë¼ì´íŠ¸ë§¤íŠ¸ë¦­ìŠ¤(Light Matrix)</label><select class="sensor-qty" id="lightMatrixQty"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select></div>
          </div>
        </td>
      </tr>
    </table>
    <!-- ì´í•˜ ê¸°ì¡´ ì½”ë“œ ë™ì¼ (ë™ì‘, ë””ìì¸ ë³€ê²½ ì—†ìŒ) -->
    <div class="section-title"><span class="icon">ğŸ”</span>Connect (ìƒê°ì—´ê¸°)</div>
    <div class="speech-row">
      <button type="button" onclick="openSpeechModal('connect')">ğŸ¤ ìŒì„± ì…ë ¥</button>
      <span class="speech-guide">ë¬¸ì œ ìƒí™©, ì£¼ì œ ì„ ì • ì´ìœ  ë“±ì„ ìì„¸íˆ</span>
    </div>
    <textarea id="connect" placeholder="ì˜ˆì‹œ: í•™êµì—ì„œ í•™ìƒë“¤ì´ ìì£¼ ì“°ë ˆê¸°ë¥¼ ë²„ë¦¬ì§€ ì•ŠëŠ” ë¬¸ì œë¥¼ ë³´ê³  ..."></textarea>
    <div class="section-title"><span class="icon">âš™ï¸</span>Construct (êµ¬ì„±í•˜ê¸°)</div>
    <div class="speech-row">
      <button type="button" onclick="openSpeechModal('construct')">ğŸ¤ ìŒì„± ì…ë ¥</button>
      <span class="speech-guide">ì„¤ê³„, ì œì‘, í”„ë¡œê·¸ë˜ë°, ì„¼ì„œ ì‚¬ìš© ë“±</span>
    </div>
    <textarea id="construct" placeholder="ì˜ˆì‹œ: SPIKE Primeê³¼ ì»¬ëŸ¬ ì„¼ì„œë¥¼ ì‚¬ìš©í•˜ì—¬ ..."></textarea>
    <div class="photo-btn-row">
      <button class="photo-btn" type="button" onclick="openCameraModal()">ğŸ“¸ ì‚¬ì§„ ì´¬ì˜</button>
      <button class="attach-file-btn" onclick="document.getElementById('fileInput').click()" type="button">ğŸ“ ì´ë¯¸ì§€ ì²¨ë¶€</button>
      <input type="file" id="fileInput" accept="image/*" multiple onchange="handleFileUpload(this)">
    </div>
    <div class="snapshot-info">ìµœëŒ€ 5ì¥ê¹Œì§€ë§Œ ì´¬ì˜/ì²¨ë¶€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
    <div class="snapshot-container" id="snapshotContainer"></div>
    <div class="camera-modal" id="cameraModal">
      <div class="camera-modal-content">
        <button class="camera-modal-close" onclick="closeCameraModal()" title="ë‹«ê¸°">&times;</button>
        <video id="video" autoplay></video>
        <div class="modal-btn-row">
          <button class="photo-btn" id="captureBtn" onclick="captureImage()" type="button">ì´ë¯¸ì§€ ì €ì¥</button>
        </div>
      </div>
    </div>
    <div class="speech-modal" id="speechModal">
      <div class="speech-modal-content">
        <button class="speech-modal-close" onclick="cancelSpeech()" title="ì·¨ì†Œ">&times;</button>
        <div class="speech-anim"><span class="speech-anim-icon">â–¶ï¸</span></div>
        <div class="speech-status" id="speechStatus">ìŒì„± ì¸ì‹ ì¤‘... <span style="font-size:1.1em;">â–¶</span></div>
        <div style="font-size:16px;color:#7a7f97;margin-bottom:12px;">ë§ì”€ì´ ëë‚˜ë©´ ìë™ ì…ë ¥ë©ë‹ˆë‹¤.</div>
        <button class="speech-cancel-btn" onclick="cancelSpeech()" type="button">ìŒì„±ì…ë ¥ ì¤‘ì§€</button>
      </div>
    </div>
    <div class="section-title"><span class="icon">ğŸ’¡</span>Contemplate (ê¹¨ì¹˜ê¸°)</div>
    <div class="speech-row">
      <button type="button" onclick="openSpeechModal('contemplate')">ğŸ¤ ìŒì„± ì…ë ¥</button>
      <span class="speech-guide">ëŠë‚€ ì , ì–´ë ¤ì› ë˜ ì , ê°œì„ í•˜ê³  ì‹¶ì€ ì </span>
    </div>
    <textarea id="contemplate" placeholder="ì˜ˆì‹œ: ì“°ë ˆê¸°í†µì´ ìë™ìœ¼ë¡œ ëšœê»‘ì´ ì—´ë ¤ì„œ í¸ë¦¬í–ˆê³  ..."></textarea>
    <div class="section-title"><span class="icon">ğŸš€</span>Continue (ì´ì–´ê°€ê¸°)</div>
    <div class="speech-row">
      <button type="button" onclick="openSpeechModal('continue')">ğŸ¤ ìŒì„± ì…ë ¥</button>
      <span class="speech-guide">ë‹¤ìŒ ë°œì „ ë°©í–¥, ì¶”ê°€ íƒêµ¬ ì£¼ì œ</span>
    </div>
    <textarea id="continue" placeholder="ì˜ˆì‹œ: íƒœì–‘ê´‘ íŒ¨ë„ì„ ë‹¬ì•„ì„œ ì¹œí™˜ê²½ì ìœ¼ë¡œ ê°œì„ í•´ ë³´ê³  ì‹¶ë‹¤ ..."></textarea>
    <button class="main-save-btn" onclick="generateReport()">ğŸ’¾ ë³´ê³ ì„œ ì €ì¥í•˜ê¸°</button>
    <div class="copyright-footer">
      ì´ í”„ë¡œê·¸ë¨ì˜ ì œì‘ìëŠ” <b>STEAM ì˜ì¬êµìœ¡ì„¼í„°</b>ì…ë‹ˆë‹¤.<br>
      ëª¨ë“  ì½˜í…ì¸ ì™€ ë°ì´í„°ëŠ” STEAM ì˜ì¬êµìœ¡ì„¼í„°ì— ì €ì‘ê¶Œì´ ìˆìœ¼ë©°, ë¬´ë‹¨ ë³µì œ ë° ë°°í¬ë¥¼ ê¸ˆí•©ë‹ˆë‹¤.<br>
      ë¬¸ì˜: <b>cnlegolab@gmail.com</b>
    </div>
  </div>
  <!-- ì´í•˜ ìŠ¤í¬ë¦½íŠ¸ ë³€ê²½ ì—†ìŒ -->
  <script>
    function showQty(qtyId, cb){ document.getElementById(qtyId).style.display = cb.checked ? 'inline-block' : 'none'; }
    let maxSnapshots = 5, snapshotData = [], cameraStream = null;
    function openCameraModal() {
      if(snapshotData.length >= maxSnapshots) { alert("ìµœëŒ€ 5ì¥ê¹Œì§€ë§Œ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."); return; }
      document.getElementById('cameraModal').classList.add('active');
      const video = document.getElementById('video');
      navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {
        cameraStream = stream;
        video.srcObject = stream;
        video.style.display = 'block';
      });
    }
    function closeCameraModal() {
      document.getElementById('cameraModal').classList.remove('active');
      const video = document.getElementById('video');
      if(cameraStream){
        cameraStream.getTracks().forEach(t=>t.stop());
        video.srcObject = null; cameraStream = null;
      }
    }
    function captureImage() {
      const video = document.getElementById('video');
      if (snapshotData.length >= maxSnapshots) {
        alert("ìµœëŒ€ 5ì¥ê¹Œì§€ë§Œ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."); closeCameraModal(); return;
      }
      const canvas = document.createElement('canvas');
      canvas.width = video.videoWidth; canvas.height = video.videoHeight;
      canvas.getContext('2d').drawImage(video, 0, 0);
      const dataURL = canvas.toDataURL('image/png');
      snapshotData.push(dataURL);
      updateSnapshots();
      closeCameraModal();
    }
    function handleFileUpload(input) {
      let files = Array.from(input.files);
      let leftCount = maxSnapshots - snapshotData.length;
      if (files.length > leftCount) files = files.slice(0, leftCount);
      files.forEach(file => {
        if (!file.type.startsWith('image/')) return;
        const reader = new FileReader();
        reader.onload = function(e) {
          snapshotData.push(e.target.result);
          updateSnapshots();
        }
        reader.readAsDataURL(file);
      });
      input.value = "";
    }
    function updateSnapshots() {
      const container = document.getElementById('snapshotContainer');
      container.innerHTML = '';
      snapshotData.forEach(d => {
        const img = document.createElement('img'); img.src = d; container.appendChild(img);
      });
    }
    let speechRecognition, speechTarget, speechModalOpen = false;
    function openSpeechModal(targetId) {
      const modal = document.getElementById('speechModal');
      modal.classList.add('active');
      speechTarget = document.getElementById(targetId);
      if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
        document.getElementById('speechStatus').innerText = "ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„±ì¸ì‹ì´ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤."; return;
      }
      speechModalOpen = true;
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      speechRecognition = new SpeechRecognition();
      speechRecognition.lang = 'ko-KR';
      speechRecognition.interimResults = false;
      speechRecognition.start();
      speechRecognition.onresult = function(event) {
        let result = event.results[0][0].transcript;
        speechTarget.value += result; closeSpeechModal();
      }
      speechRecognition.onend = function() { if(speechModalOpen) closeSpeechModal(); }
      speechRecognition.onerror = function() { if(speechModalOpen) closeSpeechModal(); }
    }
    function closeSpeechModal() {
      document.getElementById('speechModal').classList.remove('active');
      if (speechRecognition) speechRecognition.stop(); speechModalOpen = false;
    }
    function cancelSpeech() { closeSpeechModal(); }
    function generateReport() {
      const author = document.getElementById('author').value.trim();
      const title = document.getElementById('title').value.trim();
      if (!author || !title) { alert("ì‘ì„±ìì™€ ì—°êµ¬ ì œëª©ì„ ëª¨ë‘ ì…ë ¥í•´ ì£¼ì„¸ìš”."); return; }
      let writeDate = document.getElementById('writeDate').value;
      let curriculum = document.getElementById('curriculum').value || 'ì—†ìŒ';
      let sensors = [];
      [
        ['hub', 'hubQty', 'ìŠ¤ë§ˆíŠ¸ í—ˆë¸Œ (Smart Hub)'],
        ['largeMotor', 'largeMotorQty', 'ë¼ì§€ ëª¨í„° (Large Motor)'],
        ['mediumMotor', 'mediumMotorQty', 'ë¯¸ë””ì—„ ëª¨í„° (Medium Motor)'],
        ['distanceSensor', 'distanceSensorQty', 'ê±°ë¦¬ ì„¼ì„œ (Distance Sensor)'],
        ['colorSensor', 'colorSensorQty', 'ì»¬ëŸ¬ ì„¼ì„œ (Color Sensor)'],
        ['forceSensor', 'forceSensorQty', 'í˜ ì„¼ì„œ (Force Sensor)'],
        ['gyroSensor', 'gyroSensorQty', 'ìì´ë¡œ ì„¼ì„œ (Gyro Sensor)'],
        ['lightMatrix', 'lightMatrixQty', 'ë¼ì´íŠ¸ ë§¤íŠ¸ë¦­ìŠ¤ (Light Matrix)']
      ].forEach(([id, qtyId, label]) => {
        if (document.getElementById(id).checked) {
          const q = document.getElementById(qtyId).value;
          sensors.push(label + ' Ã— ' + q);
        }
      });
      const connect = document.getElementById('connect').value;
      const construct = document.getElementById('construct').value;
      const contemplate = document.getElementById('contemplate').value;
      const continueTxt = document.getElementById('continue').value;
      let imagesHTML = '';
      if (snapshotData.length > 0) {
        imagesHTML = '<div class="snapshot-info" style="margin-bottom:0;font-size:16px;color:#5361aa;text-align:center;">ì´¬ì˜/ì²¨ë¶€ ì´ë¯¸ì§€ (ìµœëŒ€ 5ì¥)</div>';
        imagesHTML += '<div class="snapshot-container" style="justify-content:center;">';
        for (let d of snapshotData) imagesHTML += `<img src='${d}'>`;
        imagesHTML += '</div>';
      }
      let reportHTML = `
      <div class="logo-wrap" style="margin-bottom:32px;justify-content:center;display:flex;align-items:flex-start;">
        <!-- ë¡œê³  ì‚­ì œ: <img src="steam.png" ...> <img src="lego.png" ...> -->
      </div>
      <h1>STEAM ì˜ì¬êµìœ¡ì„¼í„°<br>ë ˆê³ ì—ë“€ì¼€ì´ì…˜ ì—°êµ¬í™œë™ ë³´ê³ ì„œ</h1>
      <table class='meta-table'>
        <tr><th>ì—°êµ¬ ì œëª©</th><td>${title}</td></tr>
        <tr><th>ì‘ì„±ì</th><td>${author}</td></tr>
        <tr><th>êµìœ¡ê³¼ì •</th><td>${curriculum}</td></tr>
        <tr><th>ì‘ì„±ì¼</th><td>${writeDate}</td></tr>
        <tr><th>ì‚¬ìš© ì„¼ì„œ</th><td>${sensors.length ? sensors.join(', ') : 'ì—†ìŒ'}</td></tr>
      </table>
      <div class='section-title'><span class="icon">ğŸ”</span>Connect (ìƒê°ì—´ê¸°)</div>
      <div class='desc-box'>${connect.replace(/\n/g, '<br>')}</div>
      <div class='section-title'><span class="icon">âš™ï¸</span>Construct (êµ¬ì„±í•˜ê¸°)</div>
      <div class='desc-box'>${construct.replace(/\n/g, '<br>')}</div>
      ${imagesHTML}
      <div class='section-title'><span class="icon">ğŸ’¡</span>Contemplate (ê¹¨ì¹˜ê¸°)</div>
      <div class='desc-box'>${contemplate.replace(/\n/g, '<br>')}</div>
      <div class='section-title'><span class="icon">ğŸš€</span>Continue (ì´ì–´ê°€ê¸°)</div>
      <div class='desc-box'>${continueTxt.replace(/\n/g, '<br>')}</div>
      <div class="copyright-footer" style="margin-top:52px;">
        ì´ í”„ë¡œê·¸ë¨ì˜ ì œì‘ìëŠ” <b>STEAM ì˜ì¬êµìœ¡ì„¼í„°</b>ì…ë‹ˆë‹¤.<br>
        ëª¨ë“  ì½˜í…ì¸ ì™€ ë°ì´í„°ëŠ” STEAM ì˜ì¬êµìœ¡ì„¼í„°ì— ì €ì‘ê¶Œì´ ìˆìœ¼ë©°, ë¬´ë‹¨ ë³µì œ ë° ë°°í¬ë¥¼ ê¸ˆí•©ë‹ˆë‹¤.<br>
        ë¬¸ì˜: <b>cnlegolab@gmail.com</b>
      </div>
      `;
      const blob = new Blob([
        '<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><title>ë³´ê³ ì„œ</title><meta name="viewport" content="width=1200">',
        document.head.innerHTML,
        '</head><body style="margin:0;background:#fff;"><div style="max-width:880px;margin:48px auto;">',
        reportHTML,
        '</div></body></html>'
      ], {type: 'text/html'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = `${author}_${title.replace(/\s+/g,'_')}.html`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }
  </script>
</body>
</html>
